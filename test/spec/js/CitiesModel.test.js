describe('Cities collection', function () {
  var cities;
  var citiesCollection = require('../../../src/scripts/models/citiesCollection');
  var citiesList = require('../../../src/scripts/views/citiesListView');
  var citiesGallery = require('../../../src/scripts/views/citiesGalleryListView');
  var utils = require('../../../src/scripts/utils/utils');
  beforeEach(function () {
    cities = [
      {
        address: {
          cityName: 'Kyiv',
          countryName: 'Ukraine'
        },
        lat: 50.4501,
        lng: 30.523400000000038,
        place_id : 'ChIJBUVa4U7P1EAR_kYBF9IxSXY'
      },
      {
        address: {
          cityName: 'Kharkiv',
          countryName: 'Ukraine'
        },
        lat: 50.4501,
        lng: 30.523400000000038,
        place_id : 'ChIJp8Uk9xvm30ARwu6_7FXimKM'
      }
    ];
  });
  it('deleteCities must delete choosen cities from storage', function () {
    expect(citiesCollection.deleteCities).toBeDefined();
    spyOn(citiesList, 'render');
    spyOn(citiesGallery, 'render');
    utils.saveToStorage('citiesCollection', cities);
    var collectionId = ['ChIJp8Uk9xvm30ARwu6_7FXimKM'];
    var newCitiesCollection = utils.getFromStorage('citiesCollection');
    expect(newCitiesCollection.length).toBe(2);
    expect(newCitiesCollection[0].address.cityName).toBe('Kyiv');
  });
  it('handleResponse must handle response from the forecast and call render methods', function () {
    var data = {"latitude":50.4501,"longitude":30.523400000000038,"timezone":"Europe/Kiev","offset":3,"currently":{"time":1466021099,"summary":"Drizzle","icon":"rain","precipIntensity":0.0173,"precipProbability":0.51,"precipType":"rain","temperature":60.37,"apparentTemperature":60.37,"dewPoint":58.07,"humidity":0.92,"windSpeed":3.55,"windBearing":152,"visibility":3.73,"cloudCover":0.58,"pressure":1002.67,"ozone":359.07},"hourly":{"summary":"Light rain until tomorrow morning.","icon":"rain","data":[{"time":1466020800,"summary":"Light Rain","icon":"rain","precipIntensity":0.0169,"precipProbability":0.51,"precipType":"rain","temperature":60.48,"apparentTemperature":60.48,"dewPoint":58.17,"humidity":0.92,"windSpeed":3.55,"windBearing":151,"visibility":3.73,"cloudCover":0.57,"pressure":1002.64,"ozone":359.23},{"time":1466024400,"summary":"Light Rain","icon":"rain","precipIntensity":0.0207,"precipProbability":0.53,"precipType":"rain","temperature":59.12,"apparentTemperature":59.12,"dewPoint":57.02,"humidity":0.93,"windSpeed":3.64,"windBearing":169,"visibility":3.73,"cloudCover":0.64,"pressure":1003.05,"ozone":357.35},{"time":1466028000,"summary":"Light Rain","icon":"rain","precipIntensity":0.0191,"precipProbability":0.53,"precipType":"rain","temperature":57.9,"apparentTemperature":57.9,"dewPoint":56.09,"humidity":0.94,"windSpeed":3.23,"windBearing":192,"visibility":3.73,"cloudCover":0.69,"pressure":1003.37,"ozone":356.09},{"time":1466031600,"summary":"Light Rain","icon":"rain","precipIntensity":0.0146,"precipProbability":0.49,"precipType":"rain","temperature":56.86,"apparentTemperature":56.86,"dewPoint":55.25,"humidity":0.94,"windSpeed":3.22,"windBearing":226,"visibility":3.73,"cloudCover":0.73,"pressure":1003.69,"ozone":355.02},{"time":1466035200,"summary":"Light Rain","icon":"rain","precipIntensity":0.0103,"precipProbability":0.45,"precipType":"rain","temperature":56.03,"apparentTemperature":56.03,"dewPoint":54.52,"humidity":0.95,"windSpeed":3.86,"windBearing":248,"visibility":3.73,"cloudCover":0.77,"pressure":1004.07,"ozone":353.56},{"time":1466038800,"summary":"Drizzle","icon":"rain","precipIntensity":0.0066,"precipProbability":0.28,"precipType":"rain","temperature":55.52,"apparentTemperature":55.52,"dewPoint":54.14,"humidity":0.95,"windSpeed":4.36,"windBearing":256,"visibility":3.73,"cloudCover":0.8,"pressure":1004.58,"ozone":350.93},{"time":1466042400,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0.003,"precipProbability":0.09,"precipType":"rain","temperature":56.2,"apparentTemperature":56.2,"dewPoint":54.85,"humidity":0.95,"windSpeed":4.6,"windBearing":260,"cloudCover":0.83,"pressure":1005.17,"ozone":347.91},{"time":1466046000,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":57.61,"apparentTemperature":57.61,"dewPoint":55.91,"humidity":0.94,"windSpeed":4.79,"windBearing":264,"cloudCover":0.83,"pressure":1005.75,"ozone":346.33},{"time":1466049600,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":59.89,"apparentTemperature":59.89,"dewPoint":57.34,"humidity":0.91,"windSpeed":4.91,"windBearing":269,"cloudCover":0.8,"pressure":1006.3,"ozone":347.36},{"time":1466053200,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":62.66,"apparentTemperature":62.66,"dewPoint":58.84,"humidity":0.87,"windSpeed":4.96,"windBearing":274,"cloudCover":0.75,"pressure":1006.81,"ozone":349.84},{"time":1466056800,"summary":"Mostly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":65.47,"apparentTemperature":65.47,"dewPoint":59.8,"humidity":0.82,"windSpeed":5.21,"windBearing":276,"cloudCover":0.65,"pressure":1007.23,"ozone":352.06},{"time":1466060400,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":68.61,"apparentTemperature":68.61,"dewPoint":59.78,"humidity":0.73,"windSpeed":5.83,"windBearing":277,"cloudCover":0.48,"pressure":1007.46,"ozone":353.62},{"time":1466064000,"summary":"Partly Cloudy","icon":"partly-cloudy-day","precipIntensity":0,"precipProbability":0,"temperature":72.15,"apparentTemperature":72.15,"dewPoint":59.04,"humidity":0.63,"windSpeed":6.63,"windBearing":276,"cloudCover":0.26,"pressure":1007.59,"ozone":354.93},{"time":1466067600,"summary":"Clear","icon":"clear-day","precipIntensity":0.0009,"precipProbability":0.01,"precipType":"rain","temperature":75.23,"apparentTemperature":75.23,"dewPoint":58.6,"humidity":0.56,"windSpeed":7.26,"windBearing":273,"cloudCover":0.1,"pressure":1007.76,"ozone":355.48},{"time":1466071200,"summary":"Clear","icon":"clear-day","precipIntensity":0.0018,"precipProbability":0.04,"precipType":"rain","temperature":77.39,"apparentTemperature":77.39,"dewPoint":59.74,"humidity":0.55,"windSpeed":7.57,"windBearing":269,"cloudCover":0.05,"pressure":1008.03,"ozone":354.88},{"time":1466074800,"summary":"Clear","icon":"clear-day","precipIntensity":0.003,"precipProbability":0.09,"precipType":"rain","temperature":78.91,"apparentTemperature":78.91,"dewPoint":61.86,"humidity":0.56,"windSpeed":7.72,"windBearing":264,"cloudCover":0.05,"pressure":1008.36,"ozone":353.53},{"time":1466078400,"summary":"Clear","icon":"clear-day","precipIntensity":0.004,"precipProbability":0.14,"precipType":"rain","temperature":79.99,"apparentTemperature":79.99,"dewPoint":63.61,"humidity":0.57,"windSpeed":7.81,"windBearing":261,"cloudCover":0.05,"pressure":1008.7,"ozone":352.09},{"time":1466082000,"summary":"Clear","icon":"clear-day","precipIntensity":0.0044,"precipProbability":0.16,"precipType":"rain","temperature":80.76,"apparentTemperature":82.39,"dewPoint":64.24,"humidity":0.57,"windSpeed":7.87,"windBearing":260,"cloudCover":0.04,"pressure":1009.03,"ozone":350.82},{"time":1466085600,"summary":"Clear","icon":"clear-day","precipIntensity":0.0045,"precipProbability":0.17,"precipType":"rain","temperature":80.23,"apparentTemperature":81.76,"dewPoint":63.65,"humidity":0.57,"windSpeed":7.81,"windBearing":260,"cloudCover":0.03,"pressure":1009.36,"ozone":349.46},{"time":1466089200,"summary":"Clear","icon":"clear-day","precipIntensity":0.0044,"precipProbability":0.16,"precipType":"rain","temperature":78.47,"apparentTemperature":78.47,"dewPoint":62.85,"humidity":0.59,"windSpeed":7.45,"windBearing":261,"cloudCover":0.02,"pressure":1009.76,"ozone":347.97},{"time":1466092800,"summary":"Clear","icon":"clear-day","precipIntensity":0.0038,"precipProbability":0.13,"precipType":"rain","temperature":75.01,"apparentTemperature":75.01,"dewPoint":62.05,"humidity":0.64,"windSpeed":6.51,"windBearing":260,"cloudCover":0.01,"pressure":1010.24,"ozone":346.39},{"time":1466096400,"summary":"Clear","icon":"clear-day","precipIntensity":0.003,"precipProbability":0.09,"precipType":"rain","temperature":70.74,"apparentTemperature":70.74,"dewPoint":60.94,"humidity":0.71,"windSpeed":5.3,"windBearing":258,"cloudCover":0.01,"pressure":1010.79,"ozone":344.68},{"time":1466100000,"summary":"Clear","icon":"clear-day","precipIntensity":0.0022,"precipProbability":0.06,"precipType":"rain","temperature":67.23,"apparentTemperature":67.23,"dewPoint":59.74,"humidity":0.77,"windSpeed":4.55,"windBearing":257,"cloudCover":0.01,"pressure":1011.35,"ozone":342.72},{"time":1466103600,"summary":"Clear","icon":"clear-night","precipIntensity":0.0015,"precipProbability":0.03,"precipType":"rain","temperature":65.06,"apparentTemperature":65.06,"dewPoint":58.8,"humidity":0.8,"windSpeed":4.69,"windBearing":257,"cloudCover":0.01,"pressure":1011.95,"ozone":340.39},{"time":1466107200,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":63.47,"apparentTemperature":63.47,"dewPoint":58.02,"humidity":0.82,"windSpeed":5.25,"windBearing":258,"cloudCover":0,"pressure":1012.56,"ozone":337.8},{"time":1466110800,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":61.92,"apparentTemperature":61.92,"dewPoint":57.27,"humidity":0.85,"windSpeed":5.56,"windBearing":258,"cloudCover":0,"pressure":1013.1,"ozone":335.22},{"time":1466114400,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":60.1,"apparentTemperature":60.1,"dewPoint":56.33,"humidity":0.87,"windSpeed":5.31,"windBearing":258,"cloudCover":0,"pressure":1013.56,"ozone":332.76},{"time":1466118000,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":58.34,"apparentTemperature":58.34,"dewPoint":55.3,"humidity":0.9,"windSpeed":4.84,"windBearing":256,"cloudCover":0,"pressure":1013.95,"ozone":330.31},{"time":1466121600,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":57.17,"apparentTemperature":57.17,"dewPoint":54.47,"humidity":0.91,"windSpeed":4.38,"windBearing":253,"cloudCover":0.02,"pressure":1014.31,"ozone":327.82},{"time":1466125200,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":56.66,"apparentTemperature":56.66,"dewPoint":53.97,"humidity":0.91,"windSpeed":4.08,"windBearing":247,"cloudCover":0.08,"pressure":1014.67,"ozone":325.04},{"time":1466128800,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":57.36,"apparentTemperature":57.36,"dewPoint":54.33,"humidity":0.9,"windSpeed":3.88,"windBearing":238,"cloudCover":0.16,"pressure":1015,"ozone":322.22},{"time":1466132400,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":59.12,"apparentTemperature":59.12,"dewPoint":55.09,"humidity":0.86,"windSpeed":3.78,"windBearing":225,"cloudCover":0.21,"pressure":1015.27,"ozone":320.07},{"time":1466136000,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":62.38,"apparentTemperature":62.38,"dewPoint":56.18,"humidity":0.8,"windSpeed":3.84,"windBearing":207,"cloudCover":0.2,"pressure":1015.46,"ozone":319.11},{"time":1466139600,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":66.46,"apparentTemperature":66.46,"dewPoint":57.15,"humidity":0.72,"windSpeed":4.39,"windBearing":188,"cloudCover":0.16,"pressure":1015.58,"ozone":318.81},{"time":1466143200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":70.15,"apparentTemperature":70.15,"dewPoint":57.77,"humidity":0.65,"windSpeed":5.39,"windBearing":177,"cloudCover":0.11,"pressure":1015.65,"ozone":318.36},{"time":1466146800,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":73.29,"apparentTemperature":73.29,"dewPoint":58.41,"humidity":0.6,"windSpeed":6.72,"windBearing":174,"cloudCover":0.07,"pressure":1015.65,"ozone":317.31},{"time":1466150400,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":76.46,"apparentTemperature":76.46,"dewPoint":59.25,"humidity":0.55,"windSpeed":8.2,"windBearing":173,"cloudCover":0.02,"pressure":1015.58,"ozone":316.11},{"time":1466154000,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":79.57,"apparentTemperature":79.57,"dewPoint":60.26,"humidity":0.52,"windSpeed":9.53,"windBearing":173,"cloudCover":0,"pressure":1015.43,"ozone":315.27},{"time":1466157600,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":82.6,"apparentTemperature":83.25,"dewPoint":61.4,"humidity":0.49,"windSpeed":10.55,"windBearing":174,"cloudCover":0.01,"pressure":1015.2,"ozone":315.27},{"time":1466161200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":85.32,"apparentTemperature":86.14,"dewPoint":62.7,"humidity":0.47,"windSpeed":11.36,"windBearing":174,"cloudCover":0.04,"pressure":1014.9,"ozone":315.63},{"time":1466164800,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":87.16,"apparentTemperature":88.6,"dewPoint":64.18,"humidity":0.47,"windSpeed":11.98,"windBearing":175,"cloudCover":0.06,"pressure":1014.6,"ozone":315.49},{"time":1466168400,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":87.72,"apparentTemperature":90.03,"dewPoint":65.8,"humidity":0.48,"windSpeed":12.49,"windBearing":176,"cloudCover":0.05,"pressure":1014.28,"ozone":314.36},{"time":1466172000,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":86.45,"apparentTemperature":89.15,"dewPoint":66.67,"humidity":0.52,"windSpeed":12.84,"windBearing":177,"cloudCover":0.02,"pressure":1013.94,"ozone":312.72},{"time":1466175600,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":84.26,"apparentTemperature":86.97,"dewPoint":67,"humidity":0.56,"windSpeed":12.8,"windBearing":177,"cloudCover":0,"pressure":1013.69,"ozone":311.2},{"time":1466179200,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":81.04,"apparentTemperature":83.44,"dewPoint":66.85,"humidity":0.62,"windSpeed":12.1,"windBearing":175,"cloudCover":0,"pressure":1013.58,"ozone":309.95},{"time":1466182800,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":77.35,"apparentTemperature":77.35,"dewPoint":66.27,"humidity":0.69,"windSpeed":11.06,"windBearing":172,"cloudCover":0,"pressure":1013.58,"ozone":308.81},{"time":1466186400,"summary":"Clear","icon":"clear-day","precipIntensity":0,"precipProbability":0,"temperature":74.45,"apparentTemperature":74.45,"dewPoint":65.43,"humidity":0.74,"windSpeed":10.29,"windBearing":172,"cloudCover":0,"pressure":1013.63,"ozone":307.97},{"time":1466190000,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":72.91,"apparentTemperature":72.91,"dewPoint":64.52,"humidity":0.75,"windSpeed":10.15,"windBearing":176,"cloudCover":0.01,"pressure":1013.74,"ozone":307.66},{"time":1466193600,"summary":"Clear","icon":"clear-night","precipIntensity":0,"precipProbability":0,"temperature":72.03,"apparentTemperature":72.03,"dewPoint":63.64,"humidity":0.75,"windSpeed":10.39,"windBearing":183,"cloudCover":0.02,"pressure":1013.92,"ozone":307.64}]},"daily":{"summary":"Light rain today through Sunday, with temperatures rising to 93Â°F on Tuesday.","icon":"rain","data":[{"time":1465938000,"summary":"Light rain throughout the day.","icon":"rain","sunriseTime":1465955229,"sunsetTime":1466014345,"moonPhase":0.34,"precipIntensity":0.0069,"precipIntensityMax":0.0169,"precipIntensityMaxTime":1466020800,"precipProbability":0.51,"precipType":"rain","temperatureMin":55.92,"temperatureMinTime":1465952400,"temperatureMax":72.03,"temperatureMaxTime":1465999200,"apparentTemperatureMin":55.92,"apparentTemperatureMinTime":1465952400,"apparentTemperatureMax":72.03,"apparentTemperatureMaxTime":1465999200,"dewPoint":58.94,"humidity":0.85,"windSpeed":4.56,"windBearing":122,"visibility":5.37,"cloudCover":0.42,"pressure":1001.96,"ozone":358.48},{"time":1466024400,"summary":"Mostly cloudy in the morning.","icon":"partly-cloudy-day","sunriseTime":1466041625,"sunsetTime":1466100772,"moonPhase":0.37,"precipIntensity":0.0046,"precipIntensityMax":0.0207,"precipIntensityMaxTime":1466024400,"precipProbability":0.53,"precipType":"rain","temperatureMin":55.52,"temperatureMinTime":1466038800,"temperatureMax":80.76,"temperatureMaxTime":1466082000,"apparentTemperatureMin":55.52,"apparentTemperatureMinTime":1466038800,"apparentTemperatureMax":82.39,"apparentTemperatureMaxTime":1466082000,"dewPoint":59.03,"humidity":0.76,"windSpeed":5.31,"windBearing":260,"cloudCover":0.36,"pressure":1007.62,"ozone":350.05},{"time":1466110800,"summary":"Partly cloudy overnight.","icon":"partly-cloudy-night","sunriseTime":1466128025,"sunsetTime":1466187197,"moonPhase":0.4,"precipIntensity":0,"precipIntensityMax":0,"precipProbability":0,"temperatureMin":56.66,"temperatureMinTime":1466125200,"temperatureMax":87.72,"temperatureMaxTime":1466168400,"apparentTemperatureMin":56.66,"apparentTemperatureMinTime":1466125200,"apparentTemperatureMax":90.03,"apparentTemperatureMaxTime":1466168400,"dewPoint":60.43,"humidity":0.69,"windSpeed":7.29,"windBearing":186,"cloudCover":0.05,"pressure":1014.51,"ozone":317.71},{"time":1466197200,"summary":"Rain starting in the afternoon.","icon":"rain","sunriseTime":1466214428,"sunsetTime":1466273618,"moonPhase":0.43,"precipIntensity":0.0331,"precipIntensityMax":0.1333,"precipIntensityMaxTime":1466272800,"precipProbability":0.73,"precipType":"rain","temperatureMin":63.26,"temperatureMinTime":1466215200,"temperatureMax":90.03,"temperatureMaxTime":1466247600,"apparentTemperatureMin":63.26,"apparentTemperatureMinTime":1466215200,"apparentTemperatureMax":93.57,"apparentTemperatureMaxTime":1466247600,"dewPoint":65.74,"humidity":0.72,"windSpeed":2.12,"windBearing":192,"cloudCover":0.41,"pressure":1015.72,"ozone":300},{"time":1466283600,"summary":"Light rain in the morning.","icon":"rain","sunriseTime":1466300834,"sunsetTime":1466360037,"moonPhase":0.46,"precipIntensity":0.0097,"precipIntensityMax":0.0638,"precipIntensityMaxTime":1466283600,"precipProbability":0.66,"precipType":"rain","temperatureMin":65.07,"temperatureMinTime":1466298000,"temperatureMax":85.18,"temperatureMaxTime":1466344800,"apparentTemperatureMin":65.07,"apparentTemperatureMinTime":1466298000,"apparentTemperatureMax":87.71,"apparentTemperatureMaxTime":1466344800,"dewPoint":64.41,"humidity":0.74,"windSpeed":3.84,"windBearing":179,"cloudCover":0.83,"pressure":1017.75,"ozone":295.03},{"time":1466370000,"summary":"Clear throughout the day.","icon":"clear-day","sunriseTime":1466387242,"sunsetTime":1466446453,"moonPhase":0.49,"precipIntensity":0.0004,"precipIntensityMax":0.0009,"precipIntensityMaxTime":1466452800,"precipProbability":0.01,"precipType":"rain","temperatureMin":66.05,"temperatureMinTime":1466388000,"temperatureMax":90.45,"temperatureMaxTime":1466424000,"apparentTemperatureMin":66.05,"apparentTemperatureMinTime":1466388000,"apparentTemperatureMax":93.77,"apparentTemperatureMaxTime":1466424000,"dewPoint":64.97,"humidity":0.67,"windSpeed":5.73,"windBearing":139,"cloudCover":0.03,"pressure":1018.55,"ozone":293.57},{"time":1466456400,"summary":"Clear throughout the day.","icon":"clear-day","sunriseTime":1466473653,"sunsetTime":1466532866,"moonPhase":0.53,"precipIntensity":0.0006,"precipIntensityMax":0.0009,"precipIntensityMaxTime":1466460000,"precipProbability":0.01,"precipType":"rain","temperatureMin":67.88,"temperatureMinTime":1466474400,"temperatureMax":92.67,"temperatureMaxTime":1466510400,"apparentTemperatureMin":67.88,"apparentTemperatureMinTime":1466474400,"apparentTemperatureMax":96.26,"apparentTemperatureMaxTime":1466510400,"dewPoint":66.32,"humidity":0.67,"windSpeed":5.09,"windBearing":143,"cloudCover":0.01,"pressure":1018.92,"ozone":293.91},{"time":1466542800,"summary":"Clear throughout the day.","icon":"clear-day","sunriseTime":1466560068,"sunsetTime":1466619277,"moonPhase":0.56,"precipIntensity":0.001,"precipIntensityMax":0.0024,"precipIntensityMaxTime":1466596800,"precipProbability":0.07,"precipType":"rain","temperatureMin":67.3,"temperatureMinTime":1466560800,"temperatureMax":90.59,"temperatureMaxTime":1466596800,"apparentTemperatureMin":67.3,"apparentTemperatureMinTime":1466560800,"apparentTemperatureMax":93.15,"apparentTemperatureMaxTime":1466596800,"dewPoint":65.1,"humidity":0.66,"windSpeed":4.63,"windBearing":134,"cloudCover":0,"pressure":1017.59,"ozone":293.08}]},"flags":{"sources":["gfs","cmc","fnmoc","isd","madis"],"isd-stations":["333390-99999","333450-99999","333451-99999","333460-99999","333470-99999"],"madis-stations":["UKBB","UKKK","UKKM"],"units":"us"}};
    expect(citiesCollection.handleResponse).toBeDefined();
    spyOn(citiesList, 'render');
    spyOn(citiesGallery, 'render');
      citiesCollection.handleResponse(data, cities, 0, false);
      citiesCollection.handleResponse(data, cities, 0, true);
    expect(citiesList.render).toHaveBeenCalled();
    expect(citiesList.render).toHaveBeenCalledTimes(1);
    expect(citiesGallery.render).toHaveBeenCalled();
    expect(citiesGallery.render).toHaveBeenCalledTimes(1);
  });
});
